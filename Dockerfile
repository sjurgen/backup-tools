FROM ubuntu:22.04
COPY backup.sh  /app/
RUN apt -y update; apt -y install curl wget gpg unzip lsb-release; curl https://rclone.org/install.sh | bash; curl -fSsL https://www.postgresql.org/media/keys/ACCC4CF8.asc | gpg --dearmor | tee /usr/share/keyrings/postgresql.gpg > /dev/nul; echo deb [arch=amd64,arm64,ppc64el signed-by=/usr/share/keyrings/postgresql.gpg] http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main | tee /etc/apt/sources.list.d/postgresql.list; echo deb [arch=amd64,arm64,ppc64el signed-by=/usr/share/keyrings/postgresql.gpg] http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg-snapshot main | tee /etc/apt/sources.list.d/postgresql.list; echo deb [arch=amd64,arm64,ppc64el signed-by=/usr/share/keyrings/postgresql.gpg] http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg-testing main | tee /etc/apt/sources.list.d/postgresql.list; apt -y update; apt -y install postgresql-client-15; mkdir -p /root/.config/rclone/ ; mkdir -p /root/backup/postgres/
WORKDIR app
